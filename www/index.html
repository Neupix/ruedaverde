<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Rueda Verde</title>

	<link rel="stylesheet" href="ui/fontawesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="ui/ui.css">
	<link rel="stylesheet" href="style.css">

	<script src="js/jquery-2.1.0.min.js"></script>
</head>
<body>

<section id="home">
	<header>
		<div class="title">Inicio</div>

		<nav class="left">
			<a open-nav><i class="fa fa-bars"></i></a>
		</nav>
	</header>

	<article id="home_menu" data-title="Inicio">
		<img src="img/ui/logo.png" class="logo" alt="">

		<a data-article="home_eventos" class="button">
			<i class="fa fa-calendar"></i> Eventos
			<small id="home_show_eventos"></small>
		</a>
		<a data-article="home_noticias" class="button">
			<i class="fa fa-bullhorn"></i> Noticias
			<small id="home_show_noticias"></small>
		</a>
		<a data-article="home_guias" class="button">
			<li class="fa fa-group"></li> Conocer a los guías
		</a>

		<aside class="columns">
			<aside class="d6">
				<a class="button"><i class="fa fa-facebook"></i> Compartir</a>
			</aside>
	
			<aside class="d6">
				<a href="mailto:contacto@ruedaverde.org" class="button"><i class="fa fa-comment"></i> Contacto</a>
			</aside>
		</aside>
	</article><!-- home_menu -->

	<article id="home_eventos" data-title="Eventos">
		Eventos.
	</article><!-- home_eventos -->

	<article id="home_noticias" data-title="Noticias">
		<aside>
			No se han podido cargar las noticias.
		</aside>
	</article><!-- home_noticias -->

	<article id="home_guias" data-title="Guias">
			<div class="p0">
				<img src="img/guias/guias.jpg">
			</div>

			<div>Los guías donan su tiempo a Rueda Verde, y trabajan en pro de tu seguridad. Conócelos.</div>

			<div class="thumb">
				<img src="img/guias/andrea.jpg" />
				<aside>
					<h1>Andrea</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>

			<div class="thumb">
				<img src="img/guias/luisfelipe.jpg" />
				<aside>
					<h1>Luis Felipe</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>

			<div class="thumb">
				<img src="img/guias/julio.jpg" />
				<aside>
					<h1>Julio Morales</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>

			<div class="thumb">
				<img src="img/guias/dania.jpg" />
				<aside>
					<h1>Dania</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>

			<div class="thumb">
				<img src="img/guias/edd.jpg" />
				<aside>
					<h1>Edd</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>

			<div class="thumb">
				<img src="img/guias/fatho.jpg" />
				<aside>
					<h1>Fatho</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>

			<div class="thumb">
				<img src="img/guias/raquel.jpg" />
				<aside>
					<h1>Raquel</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>

			<div class="thumb">
				<img src="img/guias/suzie.jpg" />
				<aside>
					<h1>Suzie</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>

			<div class="thumb">
				<img src="img/guias/roberto.jpg" />
				<aside>
					<h1>Roberto</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>

			<div class="thumb">
				<img src="img/guias/rudy.jpg" />
				<aside>
					<h1>Rudy</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>

			<div class="thumb">
				<img src="img/guias/tannia.jpg" />
				<aside>
					<h1>Tannia</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>

			<div class="thumb">
				<img src="img/guias/gustavo.jpg" />
				<aside>
					<h1>Gustavo</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>

			<div class="thumb">
				<img src="img/guias/cesar.jpg" />
				<aside>
					<h1>Cesar</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>

			<div class="thumb">
				<img src="img/guias/gesu.jpg" />
				<aside>
					<h1>Gesu</h1>
					<small>Aquí puede ir algun texto.</small>
				</aside>
			</div>
	</article>

</section><!-- home -->

<section id="noticia">
	<header>
		<data class="title">Noticia</data>
	
		<nav class="left">
			<a back><i class="fa fa-chevron-left"></i></a>
		</nav>
	</header>

	<article id="noticia_inicio" data-title="Noticia">
		<div>
			<h1>test</h1>
			test
		</div>
	</article><!-- noticia_inicio -->
	
</section><!-- noticia -->

<nav id="side">
	<a data-article="home_menu">Inicio</a>
	<a data-article="home_eventos">Eventos</a>
	<a data-article="home_noticias">Noticias</a>
	<a data-article="home_guias">Guías</a>
	<a href="contacto@ruedaverde.org">Contáctanos</a>
</nav>

<script type="text/javascript" src="phonegap.js"></script>
<script src="js/app.js"></script>

<script>

	var updateNoticias = function() {
		var noticiasBuffer = "";
		$.ajax({
			url: "http://javierbyte.com/app/ruedaverde/api/get_recent_posts/?post_type=post",
			jsonp: "callback",
			dataType: "jsonp",
			success: function( res ) {
				$('#home_show_noticias').html(res.posts[0].title);
				for(x in res.posts) {
					noticiasBuffer += '<div class="p0"><img src="' + res.posts[x].thumbnail + '"><aside><h1>' + res.posts[x].title + '</h1>' + res.posts[x].custom_fields.texto + '</aside></div>';
				}
				$('#home_noticias').html(noticiasBuffer);
			}
		});
	}();

	var evento = [];
	var updateEventos = function() {
		var eventosBuffer = "";
		$.ajax({
			url: "http://javierbyte.com/app/ruedaverde/api/get_recent_posts/?post_type=evento",
			jsonp: "callback",
			dataType: "jsonp",
			success: function( res ) {
				$('#home_show_eventos').html(res.posts[0].title + ' [' + res.posts[0].custom_fields.fecha[0] + ']');

				for(x in res.posts) {
					evento[x] = new Object();
					evento[x].title = res.posts[x].title;
					evento[x].descripcion = res.posts[x].custom_fields.descripcion[0];
					evento[x].fecha = res.posts[x].custom_fields.fecha[0];
						evento[x].yy = evento[x].fecha.split('-')[0];
						evento[x].mm = evento[x].fecha.split('-')[1];
						evento[x].dd = evento[x].fecha.split('-')[2];
					evento[x].hora = res.posts[x].custom_fields.hora[0];
					evento[x].ruta = res.posts[x].custom_fields.ruta[0];
					evento[x].lugar = res.posts[x].custom_fields.lugar[0];

					eventosBuffer += '<div data-evento="' + x + '"><h1>' + evento[x].title + '</h1><b>Descripción</b> ' + evento[x].descripcion + '<br><b>Fecha</b> ' + evento[x].fecha + ' ' + evento[x].hora + ':00</div>';
				}
				$('#home_eventos').html(eventosBuffer);
				listenEventos();
			}
		});
	}();

	function listenEventos() {
		$('*[data-evento]').on('click', function() {
			var i = $(this).attr('data-evento');
			var startDate = new Date(evento[i].yy,evento[i].mm-1,evento[i].dd,evento[i].hora,0,0,0,0);
			var endDate = new Date(evento[i].yy,evento[i].mm-1,evento[i].dd,evento[i].hora+2,0,0,0,0);
			var title = evento[i].title;
			var location = evento[i].lugar;
			var success = function(message) { alert("Evento agregado con éxito a tu calendario, ¡te esperamos!"); };
			var error = function(message) { alert("Error: " + message); };
			window.plugins.calendar.findEvent(title,location,"",startDate,endDate,function(message) {
				if(message.length) {
					alert('Ya agregaste el evento al calendario, ¡gracias!');
				} else {
					window.plugins.calendar.createEvent(title,location,"",startDate,endDate,success,error);
				}
			},error);
		});
	}

</script>
</body>
</html>